<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>üåê Speed Test - –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üåê</text></svg>">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&family=Share+Tech+Mono&family=Creepster&display=swap');

        :root {
            --primary: #4f8cff;
            --bg: #f0f4f8;
            --card: #ffffff;
            --text: #1a1a2e;
            --subtle: #8892a4;
            --success: #34d399;
            --danger: #ff4444;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        /* ============ –ù–ï–í–ò–ù–ù–´–ô –†–ï–ñ–ò–ú ============ */
        body {
            font-family: 'Inter', sans-serif;
            background: var(--bg);
            color: var(--text);
            min-height: 100vh;
            transition: background 0.5s;
            overflow-x: hidden;
        }

        .innocent-page {
            max-width: 700px;
            margin: 0 auto;
            padding: 40px 20px;
            transition: opacity 0.3s;
        }

        .logo {
            text-align: center;
            margin-bottom: 40px;
        }
        .logo h1 {
            font-size: 2em;
            font-weight: 700;
            color: var(--primary);
        }
        .logo p {
            color: var(--subtle);
            font-size: 0.95em;
            margin-top: 5px;
        }

        .card {
            background: var(--card);
            border-radius: 16px;
            padding: 35px;
            box-shadow: 0 4px 24px rgba(0,0,0,0.06);
            margin-bottom: 20px;
        }

        .speed-display {
            text-align: center;
            padding: 30px 0;
        }
        .speed-number {
            font-size: 5em;
            font-weight: 700;
            color: var(--primary);
            line-height: 1;
            transition: all 0.3s;
        }
        .speed-unit {
            font-size: 1.2em;
            color: var(--subtle);
            margin-top: 5px;
        }

        .progress-ring {
            width: 200px;
            height: 200px;
            margin: 0 auto 20px;
            position: relative;
        }
        .progress-ring svg {
            transform: rotate(-90deg);
        }
        .progress-ring circle {
            fill: none;
            stroke-width: 8;
        }
        .progress-bg {
            stroke: #e8ecf1;
        }
        .progress-fill {
            stroke: var(--primary);
            stroke-linecap: round;
            stroke-dasharray: 565;
            stroke-dashoffset: 565;
            transition: stroke-dashoffset 0.5s ease;
        }

        .info-grid {
            display: grid;
            grid-template-columns: 1fr 1fr 1fr;
            gap: 15px;
            margin-top: 25px;
        }
        .info-item {
            text-align: center;
            padding: 15px;
            background: #f7f9fc;
            border-radius: 12px;
        }
        .info-item .label {
            font-size: 0.8em;
            color: var(--subtle);
            text-transform: uppercase;
            letter-spacing: 1px;
            margin-bottom: 5px;
        }
        .info-item .value {
            font-size: 1.3em;
            font-weight: 600;
            color: var(--text);
        }

        .start-btn {
            display: block;
            width: 100%;
            padding: 16px;
            background: linear-gradient(135deg, #4f8cff, #6c5ce7);
            color: white;
            border: none;
            border-radius: 12px;
            font-family: 'Inter', sans-serif;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 20px;
        }
        .start-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(79,140,255,0.35);
        }
        .start-btn:active {
            transform: translateY(0);
        }
        .start-btn:disabled {
            opacity: 0.7;
            cursor: not-allowed;
            transform: none;
        }

        .status-text {
            text-align: center;
            color: var(--subtle);
            font-size: 0.9em;
            margin-top: 15px;
            min-height: 20px;
        }

        .progress-bar-container {
            width: 100%;
            height: 6px;
            background: #e8ecf1;
            border-radius: 3px;
            margin-top: 15px;
            overflow: hidden;
            display: none;
        }
        .progress-bar-fill {
            height: 100%;
            background: linear-gradient(90deg, #4f8cff, #6c5ce7);
            border-radius: 3px;
            width: 0%;
            transition: width 0.3s;
        }

        .footer-text {
            text-align: center;
            color: var(--subtle);
            font-size: 0.8em;
            margin-top: 30px;
        }
        .footer-text a {
            color: var(--primary);
            text-decoration: none;
        }

        /* –ú–∞–ª–µ–Ω—å–∫–∞—è –∏–∫–æ–Ω–∫–∞ –∑–∞–≥—Ä—É–∑–∫–∏ */
        .spinner {
            display: inline-block;
            width: 16px;
            height: 16px;
            border: 2px solid rgba(255,255,255,0.3);
            border-top-color: white;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
            vertical-align: middle;
            margin-right: 8px;
        }
        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* ============ –°–¢–†–ê–®–ù–´–ô –†–ï–ñ–ò–ú ============ */
        .horror-active {
            background: #000 !important;
            overflow: hidden !important;
        }

        .horror-video {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: 99990;
            display: none;
        }

        .horror-scanlines {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: repeating-linear-gradient(
                0deg,
                rgba(0,0,0,0.15) 0px,
                rgba(0,0,0,0.15) 1px,
                transparent 1px,
                transparent 3px
            );
            z-index: 99993;
            pointer-events: none;
            display: none;
            animation: scanMove 0.1s linear infinite;
        }

        .horror-vignette {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 99994;
            pointer-events: none;
            display: none;
            box-shadow: inset 0 0 200px rgba(255,0,0,0.4);
            animation: vigPulse 1.5s ease-in-out infinite;
        }

        .horror-text {
            position: fixed;
            font-family: 'Creepster', cursive;
            color: #ff0000;
            z-index: 99995;
            pointer-events: none;
            text-shadow: 0 0 15px #ff0000, 0 0 30px #ff0000;
        }

        .horror-flash {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 99992;
            pointer-events: none;
            display: none;
            animation: redFlash 0.2s ease-in-out infinite;
        }

        .access-denied-big {
            position: fixed;
            top: 50%; left: 50%;
            transform: translate(-50%, -50%) scale(0);
            font-family: 'Creepster', cursive;
            font-size: 6em;
            color: #ff0000;
            z-index: 99999;
            pointer-events: none;
            text-shadow: 0 0 30px #ff0000, 0 0 60px #cc0000;
            letter-spacing: 10px;
            white-space: nowrap;
            display: none;
        }

        .access-denied-big.show {
            display: block;
            animation: adAppear 0.6s forwards;
        }

        .ip-horror-display {
            position: fixed;
            top: 15px;
            right: 15px;
            background: rgba(0,0,0,0.85);
            border: 1px solid #ff0000;
            border-radius: 8px;
            padding: 12px 18px;
            font-family: 'Share Tech Mono', monospace;
            color: #00ff00;
            font-size: 0.85em;
            z-index: 99996;
            display: none;
            box-shadow: 0 0 20px rgba(255,0,0,0.3);
            line-height: 1.6;
        }
        .ip-horror-display .red { color: #ff0000; }

        .escape-counter {
            position: fixed;
            bottom: 15px;
            left: 15px;
            font-family: 'Share Tech Mono', monospace;
            color: #ff0000;
            font-size: 0.85em;
            z-index: 99996;
            display: none;
            opacity: 0.8;
        }

        .fake-close-btn {
            position: fixed;
            top: 10px;
            right: 10px;
            width: 35px;
            height: 35px;
            background: #ff0000;
            color: white;
            border: none;
            border-radius: 50%;
            font-size: 1.3em;
            cursor: pointer;
            z-index: 99998;
            display: none;
            transition: all 0.15s;
            font-family: Arial;
            line-height: 35px;
            text-align: center;
        }

        .horror-particle {
            position: fixed;
            width: 3px;
            height: 3px;
            background: #ff0000;
            border-radius: 50%;
            pointer-events: none;
            z-index: 99991;
            box-shadow: 0 0 8px #ff0000;
        }

        canvas.matrix-rain {
            position: fixed;
            top: 0; left: 0;
            width: 100%; height: 100%;
            z-index: 99991;
            pointer-events: none;
            opacity: 0.12;
            display: none;
        }

        /* ===== –ê–ù–ò–ú–ê–¶–ò–ò ===== */
        @keyframes scanMove {
            0% { transform: translateY(0); }
            100% { transform: translateY(3px); }
        }
        @keyframes vigPulse {
            0%,100% { box-shadow: inset 0 0 200px rgba(255,0,0,0.3); }
            50% { box-shadow: inset 0 0 250px rgba(255,0,0,0.6); }
        }
        @keyframes redFlash {
            0%,100% { background: transparent; }
            50% { background: rgba(255,0,0,0.06); }
        }
        @keyframes adAppear {
            0% { transform: translate(-50%,-50%) scale(0.3); opacity: 0; }
            60% { transform: translate(-50%,-50%) scale(1.15); opacity: 1; }
            100% { transform: translate(-50%,-50%) scale(1); opacity: 1; }
        }
        @keyframes screenShake {
            0%,100% { transform: translate(0); }
            10% { transform: translate(-6px,-4px); }
            20% { transform: translate(6px,4px); }
            30% { transform: translate(-4px,6px); }
            40% { transform: translate(4px,-6px); }
            50% { transform: translate(-6px,4px); }
            60% { transform: translate(6px,-4px); }
            70% { transform: translate(-4px,-6px); }
            80% { transform: translate(4px,6px); }
            90% { transform: translate(-6px,-4px); }
        }
        .shake { animation: screenShake 0.5s ease-in-out; }

        @keyframes textGlitch {
            0%,90%,100% { transform: translate(0); filter: none; }
            92% { transform: translate(-4px,2px); filter: hue-rotate(90deg); }
            94% { transform: translate(4px,-2px); filter: hue-rotate(-90deg); }
            96% { transform: translate(-2px,-1px); }
        }
    </style>
</head>
<body>

    <!-- ============ –ù–ï–í–ò–ù–ù–ê–Ø –°–¢–†–ê–ù–ò–¶–ê ============ -->
    <div class="innocent-page" id="innocentPage">
        <div class="logo">
            <h1>üåê SpeedCheck</h1>
            <p>–ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç–∞</p>
        </div>

        <div class="card">
            <div class="speed-display">
                <div class="progress-ring">
                    <svg width="200" height="200">
                        <circle class="progress-bg" cx="100" cy="100" r="90"/>
                        <circle class="progress-fill" id="progressFill" cx="100" cy="100" r="90"/>
                    </svg>
                </div>
                <div class="speed-number" id="speedNumber">0</div>
                <div class="speed-unit">–ú–±–∏—Ç/—Å</div>
            </div>

            <div class="info-grid">
                <div class="info-item">
                    <div class="label">–ü–∏–Ω–≥</div>
                    <div class="value" id="pingValue">‚Äî</div>
                </div>
                <div class="info-item">
                    <div class="label">–ó–∞–≥—Ä—É–∑–∫–∞</div>
                    <div class="value" id="downloadValue">‚Äî</div>
                </div>
                <div class="info-item">
                    <div class="label">–û—Ç–¥–∞—á–∞</div>
                    <div class="value" id="uploadValue">‚Äî</div>
                </div>
            </div>

            <div class="progress-bar-container" id="progressBar">
                <div class="progress-bar-fill" id="progressBarFill"></div>
            </div>

            <button class="start-btn" id="startBtn">üöÄ –ù–∞—á–∞—Ç—å —Ç–µ—Å—Ç</button>
            <div class="status-text" id="statusText">–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –¥–ª—è –Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏</div>
        </div>

        <div class="footer-text">
            ¬© 2025 SpeedCheck ¬∑ <a href="#">–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏</a> ¬∑ v3.2.1
        </div>
    </div>

    <!-- ============ –°–¢–†–ê–®–ù–´–ô –†–ï–ñ–ò–ú ============ -->
    <video id="horrorVideo" class="horror-video" loop playsinline>
        <source src="Scream.mp4" type="video/mp4">
    </video>

    <audio id="horrorAudio" loop>
        <source src="Scream.mp3" type="audio/mpeg">
    </audio>

    <div class="horror-scanlines" id="horrorScanlines"></div>
    <div class="horror-vignette" id="horrorVignette"></div>
    <div class="horror-flash" id="horrorFlash"></div>
    <canvas class="matrix-rain" id="matrixCanvas"></canvas>

    <div class="access-denied-big" id="accessDenied">ACCESS DENIED</div>

    <div class="ip-horror-display" id="ipHorrorDisplay">
        &gt; SCANNING TARGET...<br>
        &gt; IP: <span class="red" id="horrorIP">...</span><br>
        &gt; CITY: <span class="red" id="horrorCity">...</span><br>
        &gt; ISP: <span class="red" id="horrorISP">...</span><br>
        &gt; STATUS: <span class="red">TRACKING</span>
    </div>

    <div class="escape-counter" id="escapeCounter">
        ‚ò† ESCAPE ATTEMPTS: <span id="escCount">0</span>
    </div>

    <button class="fake-close-btn" id="fakeCloseBtn">‚úï</button>

    <script>
        // ==============================
        //         –ü–ï–†–ï–ú–ï–ù–ù–´–ï
        // ==============================
        const innocentPage = document.getElementById("innocentPage");
        const startBtn = document.getElementById("startBtn");
        const speedNumber = document.getElementById("speedNumber");
        const progressFill = document.getElementById("progressFill");
        const progressBar = document.getElementById("progressBar");
        const progressBarFill = document.getElementById("progressBarFill");
        const statusText = document.getElementById("statusText");
        const pingValue = document.getElementById("pingValue");
        const downloadValue = document.getElementById("downloadValue");
        const uploadValue = document.getElementById("uploadValue");

        const horrorVideo = document.getElementById("horrorVideo");
        const horrorAudio = document.getElementById("horrorAudio");
        const horrorScanlines = document.getElementById("horrorScanlines");
        const horrorVignette = document.getElementById("horrorVignette");
        const horrorFlash = document.getElementById("horrorFlash");
        const matrixCanvas = document.getElementById("matrixCanvas");
        const accessDenied = document.getElementById("accessDenied");
        const ipHorrorDisplay = document.getElementById("ipHorrorDisplay");
        const escapeCounter = document.getElementById("escapeCounter");
        const fakeCloseBtn = document.getElementById("fakeCloseBtn");

        let horrorMode = false;
        let escAttempts = 0;
        let allPopups = [];
        let userIP = "UNKNOWN";

        // ==============================
        //     –ù–ï–í–ò–ù–ù–ê–Ø –§–ê–ó–ê ‚Äî –¢–ï–°–¢
        // ==============================
        startBtn.addEventListener("click", () => {
            startBtn.disabled = true;
            startBtn.innerHTML = '<span class="spinner"></span>–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ...';
            progressBar.style.display = "block";
            statusText.textContent = "–û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–∏–Ω–≥–∞...";

            let progress = 0;
            let speed = 0;
            const totalSteps = 100;
            let step = 0;

            const fakeTest = setInterval(() => {
                step++;
                progress = Math.min((step / totalSteps) * 100, 100);
                progressBarFill.style.width = progress + "%";

                // –ü—Ä–æ–≥—Ä–µ—Å—Å-–∫–æ–ª—å—Ü–æ (–æ–∫—Ä—É–∂–Ω–æ—Å—Ç—å = 2*PI*90 ‚âà 565)
                const offset = 565 - (565 * progress / 100);
                progressFill.style.strokeDashoffset = offset;

                if (step <= 15) {
                    // –ü–∏–Ω–≥
                    const ping = Math.floor(Math.random() * 30 + 5);
                    pingValue.textContent = ping + " –º—Å";
                    statusText.textContent = "–ò–∑–º–µ—Ä–µ–Ω–∏–µ –ø–∏–Ω–≥–∞...";
                } else if (step <= 60) {
                    // –ó–∞–≥—Ä—É–∑–∫–∞
                    speed = Math.min(speed + Math.random() * 8, 150 + Math.random() * 50);
                    speedNumber.textContent = Math.floor(speed);
                    downloadValue.textContent = Math.floor(speed) + " –ú–±/—Å";
                    statusText.textContent = "–ò–∑–º–µ—Ä–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –∑–∞–≥—Ä—É–∑–∫–∏...";
                } else if (step <= 85) {
                    // –û—Ç–¥–∞—á–∞
                    const upload = Math.floor(speed * 0.3 + Math.random() * 10);
                    uploadValue.textContent = upload + " –ú–±/—Å";
                    statusText.textContent = "–ò–∑–º–µ—Ä–µ–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ –æ—Ç–¥–∞—á–∏...";
                } else if (step <= 95) {
                    statusText.textContent = "–§–∏–Ω–∞–ª–∏–∑–∞—Ü–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤...";
                }

                if (step >= totalSteps) {
                    clearInterval(fakeTest);
                    statusText.textContent = "–ó–∞–≥—Ä—É–∑–∫–∞ –ø–æ–¥—Ä–æ–±–Ω–æ–≥–æ –æ—Ç—á—ë—Ç–∞...";
                    progressBarFill.style.width = "100%";

                    // –ü–∞—É–∑–∞, –±—É–¥—Ç–æ –≥—Ä—É–∑–∏—Ç –æ—Ç—á—ë—Ç, –∑–∞—Ç–µ–º ‚Äî –ê–î
                    setTimeout(() => {
                        statusText.textContent = "–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ —Å–µ—Ä–≤–µ—Ä—É –∞–Ω–∞–ª–∏–∑–∞...";
                    }, 800);
                    setTimeout(() => {
                        statusText.textContent = "–ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö...";
                    }, 1600);
                    setTimeout(() => {
                        activateHorror();
                    }, 2500);
                }
            }, 80);
        });

        // ==============================
        //      –ó–ê–ì–†–£–ó–ö–ê –†–ï–ê–õ–¨–ù–û–ì–û IP
        // ==============================
        function loadRealIP() {
            fetch("https://api.ipify.org?format=json")
                .then(r => r.json())
                .then(data => {
                    userIP = data.ip;
                    document.getElementById("horrorIP").textContent = data.ip;
                    return fetch(`https://ipapi.co/${data.ip}/json/`);
                })
                .then(r => r.json())
                .then(loc => {
                    document.getElementById("horrorCity").textContent =
                        (loc.city || "???") + ", " + (loc.country_name || "???");
                    document.getElementById("horrorISP").textContent =
                        loc.org || "CLASSIFIED";
                })
                .catch(() => {
                    document.getElementById("horrorIP").textContent = "HIDDEN";
                    document.getElementById("horrorCity").textContent = "CLASSIFIED";
                    document.getElementById("horrorISP").textContent = "UNKNOWN";
                });
        }
        // –ì—Ä—É–∑–∏–º IP –∑–∞—Ä–∞–Ω–µ–µ, –ø–æ–∫–∞ —é–∑–µ—Ä –Ω–∞ –Ω–µ–≤–∏–Ω–Ω–æ–π —Å—Ç—Ä–∞–Ω–∏—Ü–µ
        loadRealIP();

        // ==============================
        //      FULLSCREEN
        // ==============================
        function goFS() {
            const el = document.documentElement;
            try {
                (el.requestFullscreen || el.mozRequestFullScreen ||
                 el.webkitRequestFullscreen || el.msRequestFullscreen).call(el);
            } catch(e) {}
        }
        function forceFS() {
            if (!document.fullscreenElement && horrorMode) {
                goFS();
            }
        }

        // ==============================
        //     –ú–ê–¢–†–ò–¶–ê (–∫—Ä–∞—Å–Ω—ã–π –¥–æ–∂–¥—å)
        // ==============================
        function startMatrixRain() {
            matrixCanvas.style.display = "block";
            const ctx = matrixCanvas.getContext("2d");
            matrixCanvas.width = window.innerWidth;
            matrixCanvas.height = window.innerHeight;

            const chars = "01„Ç≤„Éº„É†„Ç™„Éº„Éê„ÉºERRORÊ≠ªFATAL‰∫°HACKÊöóÈªí";
            const fs = 14;
            const cols = Math.floor(matrixCanvas.width / fs);
            const drops = Array(cols).fill(1);

            setInterval(() => {
                ctx.fillStyle = "rgba(0,0,0,0.05)";
                ctx.fillRect(0, 0, matrixCanvas.width, matrixCanvas.height);
                ctx.font = fs + "px monospace";

                for (let i = 0; i < drops.length; i++) {
                    ctx.fillStyle = Math.random() > 0.5 ? "#ff0000" : "#880000";
                    const ch = chars[Math.floor(Math.random() * chars.length)];
                    ctx.fillText(ch, i * fs, drops[i] * fs);
                    if (drops[i] * fs > matrixCanvas.height && Math.random() > 0.975)
                        drops[i] = 0;
                    drops[i]++;
                }
            }, 45);
        }

        // ==============================
        //     POPUP-–û–ö–ù–ê (–ì–ò–î–†–ê)
        // ==============================
        function openHorrorPopup() {
            try {
                const w = 250 + Math.floor(Math.random() * 300);
                const h = 180 + Math.floor(Math.random() * 200);
                const x = Math.floor(Math.random() * (screen.width - w));
                const y = Math.floor(Math.random() * (screen.height - h));

                const popup = window.open("", "_blank",
                    `width=${w},height=${h},left=${x},top=${y},menubar=no,toolbar=no,location=no,status=no`);
                if (!popup) return;

                popup.document.write(`<!DOCTYPE html><html><head>
                    <title>SYSTEM ERROR</title>
                    <style>
                        *{margin:0;padding:0}
                        body{background:#000;overflow:hidden}
                        video{width:100%;height:100%;object-fit:cover;position:fixed;top:0;left:0}
                        .overlay-err{position:fixed;top:0;left:0;width:100%;height:100%;
                            display:flex;justify-content:center;align-items:center;
                            pointer-events:none;z-index:10}
                        .err{color:#ff0000;font-family:'Courier New',monospace;font-size:2.5em;
                            text-shadow:0 0 15px red,0 0 30px red;animation:blink .4s infinite}
                        @keyframes blink{50%{opacity:.2}}
                        .scanl{position:fixed;top:0;left:0;width:100%;height:100%;
                            background:repeating-linear-gradient(0deg,rgba(0,0,0,.12)0px,
                            rgba(0,0,0,.12)1px,transparent 1px,transparent 3px);
                            pointer-events:none;z-index:11}
                    </style></head><body>
                    <video autoplay muted loop playsinline>
                        <source src="Scream.mp4" type="video/mp4">
                    </video>
                    <div class="scanl"></div>
                    <div class="overlay-err"><div class="err">‚ò† ERROR ‚ò†</div></div>
                    <script>
                        window.onbeforeunload=function(){return""};
                        // –ü—Ä–∏ –ø–æ–ø—ã—Ç–∫–µ –∑–∞–∫—Ä—ã—Ç—å ‚Äî —É–≤–µ–¥–æ–º–∏—Ç—å —Ä–æ–¥–∏—Ç–µ–ª—è
                        setInterval(function(){
                            try{ if(window.opener && window.opener.onPopupClosed)
                                window.opener.onPopupClosed(); } catch(e){}
                        },500);
                    <\/script>
                    </body></html>`);
                popup.document.close();

                allPopups.push(popup);

                // –•–∞–æ—Ç–∏—á–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ
                const mover = setInterval(() => {
                    if (popup.closed) {
                        clearInterval(mover);
                        // –ì–∏–¥—Ä–∞: –∑–∞–∫—Ä—ã–ª 1 ‚Äî –æ—Ç–∫—Ä—ã–ª–∏—Å—å 2
                        escAttempts++;
                        updateEscCount();
                        showAccessDenied();
                        openHorrorPopup();
                        openHorrorPopup();
                        return;
                    }
                    try {
                        popup.moveTo(
                            Math.floor(Math.random() * (screen.width - 300)),
                            Math.floor(Math.random() * (screen.height - 250))
                        );
                        popup.resizeTo(
                            250 + Math.floor(Math.random() * 350),
                            180 + Math.floor(Math.random() * 250)
                        );
                    } catch(e) {}
                }, 60 + Math.floor(Math.random() * 80));

            } catch(e) {}
        }

        // –ì–ª–æ–±–∞–ª—å–Ω–∞—è —Ñ—É–Ω–∫—Ü–∏—è –¥–ª—è –≤—ã–∑–æ–≤–∞ –∏–∑ –ø–æ–ø–∞–ø–æ–≤
        window.onPopupClosed = function() {
            // –í—ã–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ –ø–æ–ø–∞–ø –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞–µ—Ç —á—Ç–æ –µ–≥–æ –ø—ã—Ç–∞—é—Ç—Å—è –∑–∞–∫—Ä—ã—Ç—å
        };

        // ==============================
        //     –ß–ê–°–¢–ò–¶–´
        // ==============================
        function spawnParticle(x, y) {
            const p = document.createElement("div");
            p.className = "horror-particle";
            p.style.left = x + "px";
            p.style.top = y + "px";
            document.body.appendChild(p);

            const angle = Math.random() * Math.PI * 2;
            const speed = Math.random() * 120 + 40;
            let opacity = 1;
            const anim = setInterval(() => {
                const cx = parseFloat(p.style.left);
                const cy = parseFloat(p.style.top);
                p.style.left = (cx + Math.cos(angle) * speed * 0.02) + "px";
                p.style.top = (cy + Math.sin(angle) * speed * 0.02) + "px";
                opacity -= 0.025;
                p.style.opacity = opacity;
                if (opacity <= 0) { clearInterval(anim); p.remove(); }
            }, 16);
        }
        function burstParticles(x, y, n = 25) {
            for (let i = 0; i < n; i++) spawnParticle(x, y);
        }

        // ==============================
        //     –ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–Ø
        // ==============================
        function spawnWarning() {
            const msgs = [
                "‚ö† CONNECTION INTERCEPTED",
                "‚ò† DATA BREACH DETECTED",
                "‚ö° FIREWALL BYPASSED",
                "üîí ENCRYPTION FAILED",
                "üíÄ SYSTEM COMPROMISED",
                "‚õî UNAUTHORIZED ACCESS",
                "üî¥ CRITICAL ALERT",
                "‚ò† TRACKING YOUR DEVICE",
                "‚ö† MALWARE INJECTED",
                "üíÄ NO ESCAPE"
            ];
            const el = document.createElement("div");
            el.className = "horror-text";
            el.textContent = msgs[Math.floor(Math.random() * msgs.length)];
            el.style.left = (5 + Math.random() * 70) + "%";
            el.style.top = (5 + Math.random() * 70) + "%";
            el.style.fontSize = (1 + Math.random() * 2) + "em";
            el.style.opacity = "0";
            el.style.animation = "textGlitch 2s infinite";
            document.body.appendChild(el);

            // –ü–æ—è–≤–ª–µ–Ω–∏–µ / –∏—Å—á–µ–∑–∞–Ω–∏–µ
            let op = 0;
            const fadeIn = setInterval(() => {
                op += 0.05;
                el.style.opacity = op;
                if (op >= 1) clearInterval(fadeIn);
            }, 30);

            setTimeout(() => {
                const fadeOut = setInterval(() => {
                    op -= 0.05;
                    el.style.opacity = op;
                    if (op <= 0) { clearInterval(fadeOut); el.remove(); }
                }, 30);
            }, 2500);
        }

        // ==============================
        //     ACCESS DENIED
        // ==============================
        function showAccessDenied() {
            accessDenied.className = "access-denied-big";
            void accessDenied.offsetWidth; // reflow
            accessDenied.classList.add("show");
            document.body.classList.add("shake");
            burstParticles(window.innerWidth / 2, window.innerHeight / 2, 35);
            setTimeout(() => {
                accessDenied.classList.remove("show");
                document.body.classList.remove("shake");
            }, 1800);
        }

        function updateEscCount() {
            document.getElementById("escCount").textContent = escAttempts;
        }

        // ==============================
        //   –ö–ù–û–ü–ö–ê "–ó–ê–ö–†–´–¢–¨" ‚Äî –û–ë–ú–ê–ù
        // ==============================
        fakeCloseBtn.addEventListener("click", (e) => {
            // –í–º–µ—Å—Ç–æ –∑–∞–∫—Ä—ã—Ç–∏—è ‚Äî –µ—â—ë —Ö—É–∂–µ
            escAttempts += 2;
            updateEscCount();
            showAccessDenied();
            burstParticles(e.clientX, e.clientY, 40);
            openHorrorPopup();
            openHorrorPopup();
            openHorrorPopup();

            // –ü–µ—Ä–µ–º–µ—â–∞–µ–º –∫–Ω–æ–ø–∫—É –≤ —Å–ª—É—á–∞–π–Ω–æ–µ –º–µ—Å—Ç–æ
            fakeCloseBtn.style.top = Math.random() * 80 + 5 + "%";
            fakeCloseBtn.style.left = Math.random() * 80 + 5 + "%";
            fakeCloseBtn.style.right = "auto";
        });

        // –ö–Ω–æ–ø–∫–∞ —É–±–µ–≥–∞–µ—Ç –ø—Ä–∏ –Ω–∞–≤–µ–¥–µ–Ω–∏–∏
        fakeCloseBtn.addEventListener("mouseenter", () => {
            if (Math.random() > 0.4) {
                fakeCloseBtn.style.top = Math.random() * 85 + 5 + "%";
                fakeCloseBtn.style.left = Math.random() * 85 + 5 + "%";
                fakeCloseBtn.style.right = "auto";
            }
        });

        // ==============================
        //    ‚òÖ‚òÖ‚òÖ –ê–ö–¢–ò–í–ê–¶–ò–Ø –•–û–†–†–û–†–ê ‚òÖ‚òÖ‚òÖ
        // ==============================
        function activateHorror() {
            horrorMode = true;

            // –£–±—Ä–∞—Ç—å –Ω–µ–≤–∏–Ω–Ω—É—é —Å—Ç—Ä–∞–Ω–∏—Ü—É
            innocentPage.style.opacity = "0";
            innocentPage.style.pointerEvents = "none";
            setTimeout(() => innocentPage.style.display = "none", 500);

            document.body.classList.add("horror-active");

            // –í–∏–¥–µ–æ
            horrorVideo.style.display = "block";
            horrorVideo.muted = false;
            horrorVideo.volume = 1.0;
            horrorVideo.play().catch(() => {
                // –ï—Å–ª–∏ –∞–≤—Ç–æ–ø–ª–µ–π –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–Ω ‚Äî –∏–≥—Ä–∞—Ç—å muted
                horrorVideo.muted = true;
                horrorVideo.play();
                // –ü–æ–ø—Ä–æ–±–æ–≤–∞—Ç—å unmute –ø—Ä–∏ –∫–ª–∏–∫–µ
                document.addEventListener("click", () => {
                    horrorVideo.muted = false;
                    horrorVideo.volume = 1.0;
                }, { once: true });
            });

            // –ê—É–¥–∏–æ
            horrorAudio.volume = 1.0;
            horrorAudio.play().catch(() => {});

            // –≠—Ñ—Ñ–µ–∫—Ç—ã
            horrorScanlines.style.display = "block";
            horrorVignette.style.display = "block";
            horrorFlash.style.display = "block";
            ipHorrorDisplay.style.display = "block";
            escapeCounter.style.display = "block";
            fakeCloseBtn.style.display = "block";

            // Fullscreen
            goFS();

            // –ú–∞—Ç—Ä–∏—Ü–∞
            startMatrixRain();

            // –¢—Ä—è—Å–∫–∞ –ø—Ä–∏ —Å—Ç–∞—Ä—Ç–µ
            document.body.classList.add("shake");
            setTimeout(() => document.body.classList.remove("shake"), 600);

            // –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è –∫–∞–∂–¥—ã–µ 2 —Å–µ–∫
            setInterval(spawnWarning, 2000);

            // –ß–∞—Å—Ç–∏—Ü—ã –∑–∞ –º—ã—à–∫–æ–π
            document.addEventListener("mousemove", (e) => {
                if (Math.random() > 0.65) spawnParticle(e.clientX, e.clientY);
            });

            // –û—Ç–∫—Ä—ã–≤–∞–µ–º –ø–µ—Ä–≤—ã–µ –ø–æ–ø–∞–ø—ã —Å –∑–∞–¥–µ—Ä–∂–∫–∞–º–∏
            setTimeout(() => openHorrorPopup(), 1000);
            setTimeout(() => openHorrorPopup(), 2500);
            setTimeout(() => openHorrorPopup(), 4000);

            // –ü–µ—Ä–∏–æ–¥–∏—á–µ—Å–∫–∏–µ –Ω–æ–≤—ã–µ –ø–æ–ø–∞–ø—ã
            setInterval(() => {
                if (allPopups.length < 20) openHorrorPopup();
            }, 7000);

            // –ö–ª–∏–∫ –ø–æ –≤–∏–¥–µ–æ ‚Äî –µ—â—ë –ø–æ–ø–∞–ø—ã
            horrorVideo.addEventListener("click", (e) => {
                burstParticles(e.clientX, e.clientY, 20);
                openHorrorPopup();
            });
        }

        // ==============================
        //     –ë–õ–û–ö–ò–†–û–í–ö–ê –í–°–ï–ì–û
        // ==============================
        document.addEventListener("keydown", (e) => {
            if (!horrorMode) return;

            const blockedKeys = [
                "Escape", "F1", "F2", "F3", "F4", "F5", "F6",
                "F7", "F8", "F9", "F10", "F11", "F12", "Tab"
            ];

            const isBlocked =
                blockedKeys.includes(e.key) ||
                (e.ctrlKey && ["w","W","q","Q","t","T","n","N","l","L","u","U","s","S","p","P","r","R","h","H"].includes(e.key)) ||
                (e.ctrlKey && e.shiftKey) ||
                (e.altKey && e.key === "F4") ||
                (e.altKey && e.key === "Tab") ||
                (e.metaKey);

            if (isBlocked) {
                e.preventDefault();
                e.stopPropagation();
                e.stopImmediatePropagation();

                escAttempts++;
                updateEscCount();
                showAccessDenied();
                forceFS();

                if (escAttempts % 3 === 0) {
                    openHorrorPopup();
                }
                if (escAttempts % 5 === 0) {
                    openHorrorPopup();
                    openHorrorPopup();
                }

                return false;
            }
        }, true);

        // –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ –º–µ–Ω—é
        document.addEventListener("contextmenu", (e) => {
            if (!horrorMode) return;
            e.preventDefault();
            escAttempts++;
            updateEscCount();
            showAccessDenied();
            burstParticles(e.clientX, e.clientY, 20);
        });

        // –ó–∞–∫—Ä—ã—Ç–∏–µ –≤–∫–ª–∞–¥–∫–∏
        window.onbeforeunload = (e) => {
            if (!horrorMode) return;
            e.preventDefault();
            e.returnValue = "‚ò† –û–¢–ö–õ–Æ–ß–ï–ù–ò–ï –ù–ï–í–û–ó–ú–û–ñ–ù–û ‚ò†";
            // –û—Ç–∫—Ä—ã—Ç—å –µ—â—ë –ø–æ–ø–∞–ø—ã
            openHorrorPopup();
            return "‚ò† –û–¢–ö–õ–Æ–ß–ï–ù–ò–ï –ù–ï–í–û–ó–ú–û–ñ–ù–û ‚ò†";
        };

        // –í—ã—Ö–æ–¥ –∏–∑ fullscreen
        document.addEventListener("fullscreenchange", () => {
            if (horrorMode && !document.fullscreenElement) {
                setTimeout(forceFS, 150);
                setTimeout(forceFS, 500);
                setTimeout(forceFS, 1000);
                escAttempts++;
                updateEscCount();
                showAccessDenied();
            }
        });

        // –ü–æ—Ç–µ—Ä—è —Ñ–æ–∫—É—Å–∞
        window.addEventListener("blur", () => {
            if (horrorMode) {
                setTimeout(() => {
                    try { window.focus(); } catch(e) {}
                }, 100);
            }
        });

        // Resize canvas
        window.addEventListener("resize", () => {
            if (matrixCanvas.style.display !== "none") {
                matrixCanvas.width = window.innerWidth;
                matrixCanvas.height = window.innerHeight;
            }
        });

        // ==============================
        //      –ê–ù–¢–ò-DEVTOOLS
        // ==============================
        setInterval(() => {
            const t = performance.now();
            debugger;
            if (performance.now() - t > 80 && horrorMode) {
                openHorrorPopup();
                openHorrorPopup();
            }
        }, 4000);

        // –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–∫—Ä—ã—Ç–∏—è DevTools –ø–æ —Ä–∞–∑–º–µ—Ä—É –æ–∫–Ω–∞
        setInterval(() => {
            if (!horrorMode) return;
            const threshold = 160;
            if (window.outerWidth - window.innerWidth > threshold ||
                window.outerHeight - window.innerHeight > threshold) {
                openHorrorPopup();
                showAccessDenied();
            }
        }, 2000);

        // ==============================
        //    HISTORY MANIPULATION
        // ==============================
        // –ó–∞–±–∏–≤–∞–µ–º –∏—Å—Ç–æ—Ä–∏—é —á—Ç–æ–±—ã –∫–Ω–æ–ø–∫–∞ "–Ω–∞–∑–∞–¥" –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∞
        setInterval(() => {
            if (horrorMode) {
                history.pushState(null, "", window.location.href);
            }
        }, 500);

        window.addEventListener("popstate", () => {
            if (horrorMode) {
                history.pushState(null, "", window.location.href);
                escAttempts++;
                updateEscCount();
                showAccessDenied();
            }
        });
    </script>
</body>
</html>
